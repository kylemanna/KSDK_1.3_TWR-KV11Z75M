<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Kinetis SDK v.1.3 API Reference Manual: VREF Peripheral driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis SDK v.1.3 API Reference Manual
   &#160;<span id="projectnumber">Rev. 0</span>
   </div>
   <div id="projectbrief">Freescale Semiconductor, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__vref__driver.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">VREF Peripheral driver<div class="ingroups"><a class="el" href="group__Voltage.html">Reference (VREF)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>This section describes the programming interface of the VREF Peripheral driver. The VREF Peripheral driver configures the Voltage Reference (VREF). It handles initialization and configuration of Voltage Reference (VREF) module.</p>
<h1><a class="anchor" id="VREFInit"></a>
VREF Initialization</h1>
<p>To initialize the VREF module, call the <a class="el" href="group__vref__driver.html#ga74fb8607af0992242d77dcf1dac8039d" title="Initializes the VREF module. ">VREF_DRV_Init()</a> function and pass in the user configuration structure. This function automatically enables the WDOG module and clock.</p>
<p>This example code shows how to initialize and configure the driver:</p>
<div class="fragment"><div class="line">    <a class="code" href="group__vref__hal.html#structvref__user__config__t">vref_user_config_t</a> vrefConfig =</div>
<div class="line">    {</div>
<div class="line"><span class="preprocessor">#if FSL_FEATURE_VREF_HAS_CHOP_OSC</span></div>
<div class="line"><span class="preprocessor"></span>        .chopOscEnable = <span class="keyword">true</span>,</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        .<a class="code" href="group__vref__hal.html#ad674cca85257d45e5a45d85aa8db73fd">trimValue</a> = 0,</div>
<div class="line">        .regulatorEnable = <span class="keyword">true</span>,</div>
<div class="line"><span class="preprocessor">#if FSL_FEATURE_VREF_HAS_COMPENSATION</span></div>
<div class="line"><span class="preprocessor"></span>        .soccEnable = <span class="keyword">true</span>,</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        .bufferMode = kVrefModeHighPowerBuffer</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Initialize VREF</span></div>
<div class="line">    <a class="code" href="group__vref__driver.html#ga74fb8607af0992242d77dcf1dac8039d">VREF_DRV_Init</a>(VREF_IDX, &amp;vrefConfig);</div>
</div><!-- fragment --><h1>VREF set output result</h1>
<p>To set the resulting VREF by approximately Â± 0.5 mV for each step, call <a class="el" href="group__vref__driver.html#gac0bc106d50e4118b0382cc95dd695950" title="Sets the TRIM bits value. ">VREF_DRV_SetTrimValue()</a> function and pass the TRIM value.</p>
<div class="fragment"><div class="line"><span class="comment">// These bits change the resulting VREF</span></div>
<div class="line"><a class="code" href="group__vref__driver.html#gac0bc106d50e4118b0382cc95dd695950">VREF_DRV_SetTrimValue</a>(VREF_IDX, trimValue);</div>
</div><!-- fragment --> <table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:fsl__vref__driver_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsl__vref__driver_8h.html">fsl_vref_driver.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga74fb8607af0992242d77dcf1dac8039d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__vref__hal.html#ga304cf65eb8b57f5ceafb3d3974125e7f">vref_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__vref__driver.html#ga74fb8607af0992242d77dcf1dac8039d">VREF_DRV_Init</a> (uint32_t instance, const <a class="el" href="group__vref__hal.html#structvref__user__config__t">vref_user_config_t</a> *userConfigPtr)</td></tr>
<tr class="memdesc:ga74fb8607af0992242d77dcf1dac8039d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the VREF module.  <a href="#ga74fb8607af0992242d77dcf1dac8039d">More...</a><br/></td></tr>
<tr class="separator:ga74fb8607af0992242d77dcf1dac8039d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad2b20de0bb79b989af56492d2d593173"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__vref__hal.html#ga304cf65eb8b57f5ceafb3d3974125e7f">vref_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__vref__driver.html#gad2b20de0bb79b989af56492d2d593173">VREF_DRV_Deinit</a> (uint32_t instance)</td></tr>
<tr class="memdesc:gad2b20de0bb79b989af56492d2d593173"><td class="mdescLeft">&#160;</td><td class="mdescRight">De-initializes the VREF module.  <a href="#gad2b20de0bb79b989af56492d2d593173">More...</a><br/></td></tr>
<tr class="separator:gad2b20de0bb79b989af56492d2d593173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0bc106d50e4118b0382cc95dd695950"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__vref__hal.html#ga304cf65eb8b57f5ceafb3d3974125e7f">vref_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__vref__driver.html#gac0bc106d50e4118b0382cc95dd695950">VREF_DRV_SetTrimValue</a> (uint32_t instance, uint8_t trimValue)</td></tr>
<tr class="memdesc:gac0bc106d50e4118b0382cc95dd695950"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the TRIM bits value.  <a href="#gac0bc106d50e4118b0382cc95dd695950">More...</a><br/></td></tr>
<tr class="separator:gac0bc106d50e4118b0382cc95dd695950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga618337643c50323a3c2a2142f898df91"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__vref__driver.html#ga618337643c50323a3c2a2142f898df91">VREF_DRV_GetTrimValue</a> (uint32_t instance)</td></tr>
<tr class="memdesc:ga618337643c50323a3c2a2142f898df91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get TRIM bits value was set.  <a href="#ga618337643c50323a3c2a2142f898df91">More...</a><br/></td></tr>
<tr class="separator:ga618337643c50323a3c2a2142f898df91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab194ff99a1d7941d4149b67286bb3d1e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__vref__hal.html#ga304cf65eb8b57f5ceafb3d3974125e7f">vref_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__vref__driver.html#gab194ff99a1d7941d4149b67286bb3d1e">VREF_DRV_SetRegulator</a> (uint32_t instance, bool enable)</td></tr>
<tr class="memdesc:gab194ff99a1d7941d4149b67286bb3d1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables or disables the regulator.  <a href="#gab194ff99a1d7941d4149b67286bb3d1e">More...</a><br/></td></tr>
<tr class="separator:gab194ff99a1d7941d4149b67286bb3d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga106af8ee6c73b46f689ae418cc5f6b20"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__vref__hal.html#ga304cf65eb8b57f5ceafb3d3974125e7f">vref_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__vref__driver.html#ga106af8ee6c73b46f689ae418cc5f6b20">VREF_DRV_SetBufferMode</a> (uint32_t instance, <a class="el" href="group__vref__hal.html#ga791fe2db52ad2d1e359ac294a00e0c7f">vref_buffer_mode_t</a> bufferMode)</td></tr>
<tr class="memdesc:ga106af8ee6c73b46f689ae418cc5f6b20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the buffer mode.  <a href="#ga106af8ee6c73b46f689ae418cc5f6b20">More...</a><br/></td></tr>
<tr class="separator:ga106af8ee6c73b46f689ae418cc5f6b20"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga74fb8607af0992242d77dcf1dac8039d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__vref__hal.html#ga304cf65eb8b57f5ceafb3d3974125e7f">vref_status_t</a> VREF_DRV_Init </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__vref__hal.html#structvref__user__config__t">vref_user_config_t</a> *&#160;</td>
          <td class="paramname"><em>userConfigPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>VREF instance. </td></tr>
    <tr><td class="paramname">userConfigPtr</td><td>Pointer to the initialization structure. See the "vref_user_config_t".</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Execution status. </dd></dl>

</div>
</div>
<a class="anchor" id="gad2b20de0bb79b989af56492d2d593173"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__vref__hal.html#ga304cf65eb8b57f5ceafb3d3974125e7f">vref_status_t</a> VREF_DRV_Deinit </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>VREF instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Execution status. </dd></dl>

</div>
</div>
<a class="anchor" id="gac0bc106d50e4118b0382cc95dd695950"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__vref__hal.html#ga304cf65eb8b57f5ceafb3d3974125e7f">vref_status_t</a> VREF_DRV_SetTrimValue </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>trimValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>These bits change the resulting VREF by approximately +/- 0.5 mV for each step. For minimum and maximum voltage reference output values, see the Data Sheet for this chip.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>VREF instance. </td></tr>
    <tr><td class="paramname">trimValue</td><td>TRIM bits value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Execution status. </dd></dl>

</div>
</div>
<a class="anchor" id="ga618337643c50323a3c2a2142f898df91"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t VREF_DRV_GetTrimValue </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>VREF instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Actual TRIM bits value. </dd></dl>

</div>
</div>
<a class="anchor" id="gab194ff99a1d7941d4149b67286bb3d1e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__vref__hal.html#ga304cf65eb8b57f5ceafb3d3974125e7f">vref_status_t</a> VREF_DRV_SetRegulator </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This bit is used to enable the internal 1.75 V regulator to produce a constant internal voltage supply to reduce the sensitivity to the external supply noise and variation. To keep the regulator enabled in very low power modes, see the Chip Configuration details for a description. This bit is set during factory trimming of the VREF voltage and should be written to 1 to achieve the performance stated in the data sheet.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>VREF instance. </td></tr>
    <tr><td class="paramname">enable</td><td>Enables or disables internal regulator<ul>
<li>true : Internal regulator enable</li>
<li>false: Internal regulator disable</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Execution status. </dd></dl>

</div>
</div>
<a class="anchor" id="ga106af8ee6c73b46f689ae418cc5f6b20"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__vref__hal.html#ga304cf65eb8b57f5ceafb3d3974125e7f">vref_status_t</a> VREF_DRV_SetBufferMode </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__vref__hal.html#ga791fe2db52ad2d1e359ac294a00e0c7f">vref_buffer_mode_t</a>&#160;</td>
          <td class="paramname"><em>bufferMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>These bits select the buffer modes for the Voltage Reference module.</p>
<ul>
<li>Buffer mode = 0x00: The internal VREF bandgap is enabled to generate an accurate 1.2 V output that can be trimmed with the TRM register TRIM[5:0] bit field. The bandgap requires some time for startup and stabilization. SC[VREFST] can be monitored to determine if the stabilization and startup is complete.</li>
<li>Buffer mode = 0x01: The internal VREF bandgap is on. The high power buffer is enabled to generate a buffered 1.2 V voltage to VREF_OUT.</li>
<li>Buffer mode = 0x02: The internal VREF bandgap is on. The high power buffer is enabled to generate a buffered 1.2 V voltage to VREF_OUT.</li>
</ul>
<p>VREF_OUT generated by high and low buffer modes can also be used as a reference to internal analog peripherals such as an ADC channel or analog comparator input. If those modes is entered from the standby mode, there is a delay before the buffer output is settled at the final value. A 100 nF capacitor is required to connect between the VREF_OUT pin and VSSA.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>VREF instance. </td></tr>
    <tr><td class="paramname">bufferMode</td><td>Buffer mode value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Execution status. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Thu Sep 24 2015 &copy; 2015 Freescale Semiconductor, Inc. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
