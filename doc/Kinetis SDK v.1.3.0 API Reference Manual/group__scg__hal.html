<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Kinetis SDK v.1.3 API Reference Manual: SCG HAL driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis SDK v.1.3 API Reference Manual
   &#160;<span id="projectnumber">Rev. 0</span>
   </div>
   <div id="projectbrief">Freescale Semiconductor, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__scg__hal.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SCG HAL driver<div class="ingroups"><a class="el" href="group__scg.html">System Clock Generator (SCG)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>This section describes the programming interface of the SCG HAL driver. The SCG HAL driver configures the SCG (System Clock Generator). It handles calibration, initialization, and configuration of the SCG module.</p>
<p>The SCG driver provides three kinds of APIs:</p>
<ol type="1">
<li>APIs for MCU system clock.</li>
<li>APIs for clock out selection.</li>
<li>APIs for clock source configuration, including system OSC, slow IRC, fast IRC, and system PLL.</li>
</ol>
<h1><a class="anchor" id="SCGMSC"></a>
APIs for MCU system clock</h1>
<p>The MCU system clock configuration includes clock source and dividers. There are dedicated control registers for RUN mode, VLPR mode, and HSRUN mode. When the MCU switches to a new power mode, the configuration for the corresponding mode is used.</p>
<p>The SCG driver provides APIs to set and get configuration registers. For example, to get the system clock configuration of the RUN mode, use the function CLOCK_HAL_GetSystemClockConfigInRun(). To set the system clock configuration of the VLPR mode, use the function CLOCK_HAL_SetSystemClockConfigInVlpr().</p>
<p>Besides these APIs, the SCG HAL driver also provides the CLOCK_HAL_GetSystemClockFreq() function to get the system clock output frequency.</p>
<h1><a class="anchor" id="SCGOUT"></a>
APIs for clock out selection</h1>
<p>For the SCG CLKOUT, the SCG HAL driver provides the <a class="el" href="group__sim__hal.html#ga45763ba7aabf6b6c98d78280fcf68fe8" title="Get CLKOUTSEL selection. ">CLOCK_HAL_GetClkOutSel()</a> and <a class="el" href="group__sim__hal.html#gab45f98ae4171552121942a5e5c14b26d" title="Set CLKOUTSEL selection. ">CLOCK_HAL_SetClkOutSel()</a> functions to get and set the configuration.</p>
<h1><a class="anchor" id="SCGCSC"></a>
APIs for clock source configuration</h1>
<p>The SCG has four clock sources, system OSC, system PLL, fast IRC, and slow IRC. For each clock source, the SCG driver provides these APIs:</p>
<ul>
<li>API to set up the clock source one step base on configuration structure.</li>
<li>API to get the default configuration structure. This configuration structure ensures that the clock works. For special use cases, modify the structure.</li>
<li>API to validate the configuration structure (optional).</li>
<li>API to get the frequency of this clock source.</li>
<li>API to get the asynchronous frequency of this clock source.</li>
<li>API to de-initialize the clock source.</li>
</ul>
<p>This is an example to set up the clock source based on the SCG HAL APIs.</p>
<div class="fragment"><div class="line"><span class="comment">/* An example code that shows how to set up the system OSC. </span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">scg_sys_osc_config_t config;</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">// Get default configuration.</span></div>
<div class="line"><span class="comment">CLOCK_HAL_GetSysOscDefaultConfig(&amp;config);</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">// Modify according to board setting.</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">// Sets up the system OSC.</span></div>
<div class="line"><span class="comment">CLOCK_HAL_InitSysOsc(SCG_BASE, &amp;config);</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">// De-initializes the system OSC.</span></div>
<div class="line"><span class="comment">CLOCK_HAL_DeinitSysOsc(SCG_BASE);</span></div>
</div><!-- fragment --><p>Because some configurations of the clock source can only be changed when the clock source is disabled, the function <code>CLOCK_HAL_InitXxx</code> disables the clock source, re-configures and enables it. As a result, before using the <code>CLOCK_HAL_InitXxx</code>, ensure that the clock source is not used.</p>
<ul>
<li>Not chosen as the system clock.</li>
<li>Not used to generate asynchronous clock for on-chip peripherals.</li>
<li>Not used by another clock source. For example, the FIRC can be used as the clock source of the system PLL. Therefore, when the system PLL is used, do not use the CLOCK_HAL_InitFirc function to re-configure FIRC. </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Thu Sep 24 2015 &copy; 2015 Freescale Semiconductor, Inc. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
