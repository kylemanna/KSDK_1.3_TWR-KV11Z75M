<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Kinetis SDK v.1.3 Demo Applications User&#39;s Guide: Hello World QSPI Demo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis SDK v.1.3 Demo Applications User&#39;s Guide
   &#160;<span id="projectnumber">Rev. 0</span>
   </div>
   <div id="projectbrief">Freescale Semiconductor, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__hello__world__qspi.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Hello World QSPI Demo</div>  </div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="Ovw"></a>
Overview</h1>
<p>The Hello World QSPI demo project is a demonstration program that uses the KSDK software. This demo shows how to boot from QSPI region and the QSPI alias region if supported. This example can generate two different demos using a different linker file and a startup file : </p>
<ul>
<li>
Progrom boot from QSPI region. </li>
<li>
Program boot from QSPI alias region (If the chip support QSPI alias region). </li>
</ul>
<h1><a class="anchor" id="SP"></a>
Supported Platforms</h1>
<p>These Tower System modules and Freescale Freedom platforms are supported by the Hello World QSPI demo:</p>
<ul>
<li>TWR-K80F150M</li>
</ul>
<h1><a class="anchor" id="SR"></a>
System Requirement</h1>
<h2><a class="anchor" id="HwR"></a>
Hardware requirements</h2>
<ul>
<li>J-Link ARM</li>
<li>P&amp;E Micro Multi-link universal</li>
<li>Mini/micro USB cable</li>
<li>USB A to micro AB cable</li>
<li>Hardware (Tower System/base board, ...) for a specific device</li>
<li>Personal Computer</li>
</ul>
<h2><a class="anchor" id="SDKReq"></a>
Software requirements</h2>
<ul>
<li>The project files for booting from the QSPI region are in : &lt;SDK_Install&gt;/examples/&lt;board&gt;/demo_apps/hello_world_qspi/&lt;toolchain&gt;.</li>
<li>The project file for booting from the alias region are in: &lt;SDK_Install&gt;/examples/&lt;board&gt;/demo_apps/hello_world_qspi_alias/&lt;toolchain&gt;.</li>
<li>Library dependencies: ksdk_platform_lib</li>
<li>Tool dependencies: Use the blhost and the elftosb tool provided by the ROM team from www.freescale.com</li>
</ul>
<h1><a class="anchor" id="GS"></a>
Getting Started</h1>
<h2><a class="anchor" id="HwS"></a>
Hardware settings</h2>
<p>This example requires external serial flash powered:</p>
<h3>TWR-K80F150M</h3>
<p>Jumper J30 pin 4 and pin 6 should be connected.</p>
<h2><a class="anchor" id="PtE"></a>
Prepare the example</h2>
<ol type="1">
<li>Press the SW2 button (NMI button) continously and connect a USB cable between the PC host and the OpenSDA USB port on the board. The button should be pressed until openSDA USB port connected.</li>
<li>Build the demo project and get the .srec output file.</li>
<li>Use elftosb tool to convert srec file to SB file needed by blhost.<ul>
<li>First a .bd file is needed, open .bd file in &lt;SDK_Install&gt;/examples/&lt;board&gt;/demo_apps/hello_world_qspi/hello_world_qspi.bd. While change to other demo, just change the srec file name in .bd file.</li>
<li>In command line, use command "./elftosb.exe -V -c hello_world_qspi.bd -o hello_world_qspi.sb" to get a sb file.</li>
</ul>
</li>
<li>Prepare QSPI config block for BootROM.<ul>
<li>If using TWR-K80, just use the qspi_config_block.bin located in &lt;SDK_Install&gt;/examples/&lt;board&gt;/demo_apps/hello_world_qspi/qspi_config_block.bin</li>
<li>If using different flash chip, the qspi config block should be re-configured in source file located in &lt;SDK_Install&gt;/examples/src/demo_apps/hello_world_qspi/qspi_config_block_generator.c, users can use GCC/Visual Studio/Code Block to re-generate a .bin file for QSPI configure block.</li>
<li>For detailed information of QSPI configure block, see document from BootLoader team.</li>
</ul>
</li>
<li>Use blhost to configure bootloader and download code.<ul>
<li>While using blhost, "./blhost.exe -p COMxx -- receive-sb-file hello_world_qspi.sb" ("COMxx" means the virtual COM number of the board.) Notice: -If using UART as communication between blhost, should not open serial terminal, or it may download failed.</li>
</ul>
</li>
<li>Open a serial terminal with these settings:<ul>
<li>115200 baud rate</li>
<li>8 data bits</li>
<li>No parity</li>
<li>One stop bit</li>
<li>No flow control</li>
</ul>
</li>
<li>Press the reset button on your board.</li>
</ol>
<h2><a class="anchor" id="RtE"></a>
Run the example</h2>
<p>The example makes two LEDs light up and these instruction are displayed/shown on the terminal window:</p>
<div class="fragment"><div class="line">Hello World QSPI demo started!</div>
</div><!-- fragment --><p> Input some characters and the demo displays those characters.</p>
<p>Notice :</p>
<ol type="1">
<li>This example has no any code to change clock settings or system run mode. To change the system or QSPI clock settings, copy the code which changed clock settings or run mode from the QSPI memory to RAM first.</li>
<li>For the QSPI alias demo running in Keil, copy the .bss and RW section from the QSPI flash to RAM at startup before calling the main function. </li>
</ol>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Wed Nov 11 2015 &copy; 2015 Freescale Semiconductor, Inc. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
