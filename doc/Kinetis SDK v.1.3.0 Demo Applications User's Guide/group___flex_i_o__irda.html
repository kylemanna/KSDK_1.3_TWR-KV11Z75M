<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Kinetis SDK v.1.3 Demo Applications User&#39;s Guide: FlexIO IRDA Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis SDK v.1.3 Demo Applications User&#39;s Guide
   &#160;<span id="projectnumber">Rev. 0</span>
   </div>
   <div id="projectbrief">Freescale Semiconductor, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___flex_i_o__irda.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">FlexIO IRDA Example</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example application demonstrates FlexIO timer to encode and decode IRDA pulse.</p>
<h1><a class="anchor" id="Ovw"></a>
Overview</h1>
<p>This example uses FlexIO UART driver and FlexIO timers to send and receive IRDA signals. Data is first sent via FlexIO-simulated UART, then the simulated UART TX signal is routed into one FlexIO timer and encoded into IRDA pulse. On the receiving side, the IRDA pulse is first routed into one FlexIO timer, the timer decodes it into UART RX signal, then FlexIO UART driver receives the decoded signal.</p>
<h1><a class="anchor" id="SP"></a>
Supported Platforms</h1>
<p>This Freescale Freedom development platform is supported by the KSDK FlexIO IRDA example.</p>
<ul>
<li>FRDM-KL43Z </li>
</ul>
<h1><a class="anchor" id="SR"></a>
System Requirement</h1>
<h2><a class="anchor" id="HwR"></a>
Hardware requirements</h2>
<ul>
<li>J-Link ARM</li>
<li>P&amp;E Micro Multilink universal</li>
<li>Mini/micro USB cable</li>
<li>USB A to micro AB cable</li>
<li>Personal Computer</li>
</ul>
<h1><a class="anchor" id="GS"></a>
Getting Started</h1>
<h2><a class="anchor" id="HS"></a>
Hardware Settings</h2>
<p>The FlexIO IRDA project does not call for any special hardware configurations in default loop-back mode. For non loop-back mode or using CMP0 trig mode, connect the FlexIO and CMP0 pins according to the following settings:</p>
<h3>FRDM-KL43Z:</h3>
<p>CMP0 Trig mode</p>
<ul>
<li>fsl_flexio_irda.h define IRDA_RX_CMP0_TRIG to 1</li>
<li>main.h define LOOPBACK_TEST to 0 <div> <table class="doxtable">
<tr>
<td colspan="2" align="center" bgcolor="#2E9AFE">FlexIO </td><td colspan="1" rowspan="2" align="center" bgcolor="#2E9AFE">Connects To </td><td colspan="2" align="center" bgcolor="#2E9AFE">CMP0  </td></tr>
<tr>
<td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location </td><td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location  </td></tr>
<tr>
<td align="center">PTD7 </td><td align="center">J2-10 </td><td align="center">-&gt; </td><td align="center">PTC6 </td><td align="center">J1-9  </td></tr>
</table>
</div></li>
</ul>
<p>Non loop-back mode (this mode loops-back externally for an easy demo test)</p>
<ul>
<li>fsl_flexio_irda.h define IRDA_RX_CMP0_TRIG to 0</li>
<li>main.h define LOOPBACK_TEST to 0 <div> <table class="doxtable">
<tr>
<td colspan="2" align="center" bgcolor="#2E9AFE">FlexIO </td><td colspan="1" rowspan="2" align="center" bgcolor="#2E9AFE">Connects To </td><td colspan="2" align="center" bgcolor="#2E9AFE">FlexIO  </td></tr>
<tr>
<td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location </td><td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location  </td></tr>
<tr>
<td align="center">PTD6 </td><td align="center">J2-8 </td><td align="center">-&gt; </td><td align="center">PTD7 </td><td align="center">J2-10  </td></tr>
</table>
</div></li>
</ul>
<p>The user can check UART and IRDA waveform at the following pins. </p>
<div> <table class="doxtable">
<tr>
<td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location </td><td colspan="1" align="center" bgcolor="#2E9AFE">Function </td><td colspan="1" align="center" bgcolor="#2E9AFE">Comments  </td></tr>
<tr>
<td align="center">PTD4 </td><td align="center">J2-6 </td><td align="left">FlexIO simulated UART TX </td><td align="left">Optional OFF(define FLEXIO_UART_TX_PINEN to 0)   </td></tr>
<tr>
<td align="center">PTD5 </td><td align="center">J2-12 </td><td align="left">FlexIO simulated UART RX </td><td align="left">No waveform in loop-back mode  </td></tr>
<tr>
<td align="center">PTD6 </td><td align="center">J2-8 </td><td align="left">IRDA pulse input for FlexIO timer to decode into UART </td><td align="left">Non loop-back mode only  </td></tr>
<tr>
<td align="center">PTD7 </td><td align="center">J2-10 </td><td align="left">IRDA pulse output encoded by FlexIO timer  </td><td align="left"></td></tr>
<tr>
<td align="center">PTE0 </td><td align="center">J2-18 </td><td align="left">CMP0 output </td><td align="left">Can check CMP0 output in CMP0 trig mode  </td></tr>
</table>
</div> <h2><a class="anchor" id="PtD"></a>
Prepare the Demo</h2>
<ol type="1">
<li>Connect a USB cable between the PC host and the OpenSDA USB port on the board.</li>
<li>Open a serial terminal with these settings:<ul>
<li>115200 baud rate</li>
<li>8 data bits</li>
<li>No parity</li>
<li>One stop bit</li>
<li>No flow control</li>
</ul>
</li>
<li>Download the program to the target board.</li>
<li>Either press the reset button on your board or launch the debugger in your IDE to begin running the demo.</li>
<li>Program ends with a while (1) loop to get the user input from the terminal window one character at a time and send the input character via IRDA. The character is also echoed on the terminal window. For detailed instructions, see the appropriate board-specific document.</li>
</ol>
<h1><a class="anchor" id="RtD"></a>
Run the demo</h1>
<p>This example shows the following information on the terminal window:</p>
<div> <pre class="fragment">
Start FlexIO UART/IRDA demo</pre></div><div><pre class="fragment">Non-blocking Send/Receive Demo
String data is : Hello World
Binary data is : 0x48656c6c6f20576f726c640</pre></div><div><pre class="fragment">Blocking Send Demo
String data is : Hello
Binary data is : 0x48656c6c6f</pre></div><div><pre class="fragment">Blocking Receive Demo
String data is : He
Binary data is : 0x4865</pre></div><div><pre class="fragment">Last demo: Input one char at a time from the terminal.
It is transmitted via the FlexIO IRDA driver and echoed on the terminal.
abcdefghijklmn (This is the example echo user input for one character at a time).
    </pre> </div><h2><a class="anchor" id="Cust"></a>
Customization Options</h2>
<ul>
<li>In main.h<ul>
<li>The IRDA_RX_CMP0_TRIG(default to 0) definition determines whether to use the CMP0 as the FlexIO trig.</li>
<li>The LOOPBACK_TEST(default to 1) definition determines whether the loop back FlexIO signals internally.</li>
<li>The FLEXIO_UART_RX_PINEN(default to 1) definition determines whether the FlexIO-simulated UART RX signals present on PTD5.</li>
<li>The FLEXIO_UART_TX_PINEN(default to 1) definition determines whether the FlexIO-simulated UART TX signals present on PTD4.</li>
</ul>
</li>
<li>In fsl_flexio_irda.h<ul>
<li>The IRDA_RXPIN_REVERSE(default to 0) definition determines whether the FlexIO IRDA decoding timer uses a reversed input or not.</li>
<li>The IRDA_TXPIN_REVERSE(default to 0) definition determines whether the FlexIO IRDA encoding timer reverses the output pulse or not.</li>
<li>Note: IRDA_RXPIN_REVERSE and IRDA_TXPIN_REVERSE must be the same for the demo test. </li>
</ul>
</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Wed Nov 11 2015 &copy; 2015 Freescale Semiconductor, Inc. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
