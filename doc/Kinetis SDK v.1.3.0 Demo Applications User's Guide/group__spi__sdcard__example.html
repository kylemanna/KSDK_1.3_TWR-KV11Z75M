<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Kinetis SDK v.1.3 Demo Applications User&#39;s Guide: SPI SDCard Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis SDK v.1.3 Demo Applications User&#39;s Guide
   &#160;<span id="projectnumber">Rev. 0</span>
   </div>
   <div id="projectbrief">Freescale Semiconductor, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__spi__sdcard__example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SPI SDCard Example</div>  </div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="Ovw"></a>
Overview</h1>
<p>The SPI SDCard Example application demonstrates the use of SD card driver with SPI. This example doesn't support SD card memory that is greater than 2 GB) </p>
<ul>
<li>Detect card inserted</li>
<li>Check card status: lock or unlock (detect by hardware pin)</li>
<li>Read and write single block and multi-blocks to SDCard</li>
<li>Erase blocks in SDCard</li>
</ul>
<h1><a class="anchor" id="SP"></a>
Supported Platforms</h1>
<p>These Freescale Tower System modules are supported by the SPI SDCard example.</p>
<ul>
<li>TWR-K22F120M</li>
<li>TWR-K24F120M</li>
<li>TWR-KV31F120M</li>
</ul>
<h1><a class="anchor" id="SR"></a>
System Requirement</h1>
<h2><a class="anchor" id="HwR"></a>
Hardware requirements</h2>
<ul>
<li>J-Link ARM</li>
<li>P&amp;E Micro Multi-link universal</li>
<li>Mini/micro USB cable</li>
<li>USB A to micro AB cable</li>
<li>Hardware (tower/base board, TWR-MEM board...) for specific device</li>
<li>Personal Computer</li>
</ul>
<h2><a class="anchor" id="SDKReq"></a>
Software requirements</h2>
<ul>
<li>The project files are in: &lt;SDK_Install&gt;/examples/&lt;board&gt;/driver_examples/spi_sdcard/&lt;toolchain&gt;.</li>
<li>Library dependencies: ksdk_platform_lib</li>
</ul>
<h1><a class="anchor" id="GS"></a>
Getting Started</h1>
<h2><a class="anchor" id="HwS"></a>
Hardware settings</h2>
<p>The SPI SDCard Example project does not require any special hardware configurations. Although not required, the recommendation is to leave the development board's jumper settings and configurations in default state when running this example. If there is not any built-in SDCard slot on the board, the TWR-MEM Tower System module is required to run this example.</p>
<h2><a class="anchor" id="PtE"></a>
Prepare the example</h2>
<ol type="1">
<li>Connect a USB cable between the PC host and the OpenSDA USB port on the board.</li>
<li>Open a serial terminal with these settings:<ul>
<li>115200 baud rate</li>
<li>8 data bits</li>
<li>No parity</li>
<li>One stop bit</li>
<li>No flow control</li>
</ul>
</li>
<li>Download the program to the target board.</li>
<li>Either press the reset button on your board or launch the debugger in your IDE to begin running the example.</li>
</ol>
<h2><a class="anchor" id="RtE"></a>
Run the example</h2>
<p>Ensure that the card doesn't contain any important content because the demo erases and overwrites some sectors.</p>
<p>These instructions are displayed/shown on the terminal window:</p>
<div class="fragment"><div class="line">SPI SD Card Demo Start!</div>
<div class="line">BaudRate set to 375000Hz</div>
<div class="line">BaudRate set to 20000000Hz</div>
<div class="line">------- Card Information -------</div>
<div class="line">Card Type: SDSC</div>
<div class="line">Card Capacity: 1.97 GB</div>
<div class="line">-------- Card CID --------</div>
<div class="line">Manufacturer ID: 0x2</div>
<div class="line">OEM ID: 0x544D</div>
<div class="line">Product name: SA02G</div>
<div class="line">Product revision: 0.5</div>
<div class="line">Product serial number: 0x2080728A</div>
<div class="line">Manufacturing data: Aug 2010</div>
<div class="line">-------- Card CSD --------</div>
<div class="line">CSD Structure: 0x0</div>
<div class="line">taac: 2000.00 us</div>
<div class="line">nsac: 0 clks</div>
<div class="line">tran speed: 25000000.00 kbps</div>
<div class="line">ccc: <span class="keyword">class </span>0 2 4 5 7 8 10</div>
<div class="line">max read block length: 1024 Bytes</div>
<div class="line">max write block length: 1024 Bytes</div>
<div class="line">Support partial read</div>
<div class="line">Support crossing physical block boundaries reading is allowed</div>
<div class="line">VDD_R_CURR_MIN: 0x7</div>
<div class="line">VDD_R_CURR_MAX: 0x1</div>
<div class="line">VDD_W_CURR_MIN: 0x7</div>
<div class="line">VDD_W_CURR_MAX: 0x3F</div>
<div class="line">c_size_mult: 7</div>
<div class="line">c_size: 3763</div>
<div class="line">Erase unit size is one or multiple units of 512 bytes</div>
<div class="line">The size of write <span class="keyword">protected</span> group is 2 blocks</div>
<div class="line">R2W_Factor: 2</div>
<div class="line">Hard disk-like file system with partition table</div>
<div class="line"></div>
<div class="line">Start read/write example...</div>
<div class="line">Single block read/write example passed!</div>
<div class="line">Writing 4096 bytes for 100 times in 2502 ms, at 163 kB/s</div>
<div class="line">Reading 4096 bytes for 100 times in 2164 ms, at 189 kB/s</div>
<div class="line">Multi-block read/write example passed!</div>
<div class="line"></div>
<div class="line">SPI SD Card Demo End!</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Wed Nov 11 2015 &copy; 2015 Freescale Semiconductor, Inc. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
