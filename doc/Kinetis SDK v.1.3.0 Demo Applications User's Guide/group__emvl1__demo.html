<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Kinetis SDK v.1.3 Demo Applications User&#39;s Guide: EMVL1 Demo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis SDK v.1.3 Demo Applications User&#39;s Guide
   &#160;<span id="projectnumber">Rev. 0</span>
   </div>
   <div id="projectbrief">Freescale Semiconductor, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__emvl1__demo.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">EMVL1 Demo</div>  </div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="Ovw"></a>
Overview</h1>
<p>This demo demonstrates the KSDK peripheral drivers and EMVL1 stack working with different methods and KSDK supported RTOS. The demo shows how to use the EMVL1 stack with these efficiency methods:</p>
<ul>
<li>CPU transfer using T0 protocol / using T1 protocol</li>
<li>DMA transfer using T0 protocol / using T1 protocol</li>
</ul>
<p>Note that for transferring data between the board and smart card ZeitControl ZC7.5 RevD. The Example completes the transfer using both T0 and T1 modes and reads the card EEPROM capacity. This demo works correctly only with ZeitControl smart cards. Other vendors uses other proprietary commands.</p>
<h1><a class="anchor" id="SP"></a>
Supported Platforms</h1>
<p>These Freescale Freedom development platforms and Tower System modules are supported by the emvl1_demo application.</p>
<ul>
<li>TWR-K21F120M (using TWR-POSCARD, combination of smartcard_uart and smartcard_ncn8025 drivers)</li>
<li>TWR-K80F150M (using on-board micro-SIM socket, combination of smartcard_emvsim and smartcard_direct drivers)</li>
</ul>
<h1><a class="anchor" id="SR"></a>
System Requirement</h1>
<h2><a class="anchor" id="HwR"></a>
Hardware requirements</h2>
<ul>
<li>J-Link ARM</li>
<li>P&amp;E Micro Multi-link universal</li>
<li>Mini/micro USB cable</li>
<li>USB A to micro AB cable</li>
<li>Hardware (tower/base board, ...) for specific device</li>
<li>Personal Computer</li>
<li>TWR-POSCARD Tower System module (in case of micro SIM interface absence on microprocessor Tower System module)</li>
<li>smart card ZeitControl ZC7.5 RevD</li>
</ul>
<h2><a class="anchor" id="SDKReq"></a>
Software requirements</h2>
<ul>
<li>The project files are in: &lt;SDK_Install&gt;/examples/&lt;board&gt;/demo_apps/emvl1_demo/&lt;toolchain&gt;.</li>
<li>Library dependencies: ksdk_platform_lib, ksdk_emv_lib</li>
</ul>
<h1><a class="anchor" id="GS"></a>
Getting Started</h1>
<h2><a class="anchor" id="HwS"></a>
Hardware settings</h2>
<p>The EMVL1 project calls for special hardware configurations when using TWR-POSCARD. In case of using :</p>
<ul>
<li>TWR-POSCARD Tower System module requires following important jumper setting of J24(2-3) and J26(1-2), common for all supported boards.</li>
<li>TWR-K21F120M Tower System module, TWR-poscard jumper settings required: J22 (3-4), J1 (open), J3 (3-5), J7 (2-4, 3-5), J19 (1-2), J18 (open), J2 (3-5)</li>
<li>TWR-K80F150M Tower System module in combination with TWR-poscard, following jumper settings are required: J21 (1-2), J22 (1-2, 3-4), J1 (4-6), J3 (4-6), J7 (1-3, 4-6), J19 (open), J18 (open), J2 (4-6) on TWR-K80F150M Tower System module 0 ohm resistor R215 has to be removed (this R215 resistor is required to communicate with on Tower System module (K80F150M) SIM interface).</li>
</ul>
<h2><a class="anchor" id="PtE"></a>
Prepare the example</h2>
<ol type="1">
<li>Connect a USB cable between the PC host and the OpenSDA USB port on the board.</li>
<li>Open a serial terminal with these settings:<ul>
<li>115200 baud rate</li>
<li>8 data bits</li>
<li>No parity</li>
<li>One stop bit</li>
<li>No flow control</li>
</ul>
</li>
<li>Download the program to the target board.</li>
<li>Either press the reset button on your board or launch the debugger in your IDE to begin running the example.</li>
<li>Insert smart card into socket (in case of using TWR-POSCARD board it's socket under magnetic stripe reader in case of using TWR-k80 Tower System modules it's socket under microSD card socket).</li>
</ol>
<h2><a class="anchor" id="RtE"></a>
Run the example</h2>
<h3><a class="anchor" id="EMV"></a>
Emvl1_demo</h3>
<p>These instructions are displayed/shown on the terminal window:</p>
<div class="fragment"><div class="line">........................... EMVL1 demo ..............................</div>
<div class="line"></div>
<div class="line">      SMARTCARD Driver Protocol Test in CPU mode *****</div>
<div class="line"></div>
<div class="line">Card inserted.</div>
<div class="line">Deactivating card...Done!</div>
<div class="line">Resetting/Activating card...Done!</div>
<div class="line"></div>
<div class="line">==========================================</div>
<div class="line">Protocol T=0 test started!</div>
<div class="line"></div>
<div class="line">EEPROM Start Address = 0xC00000</div>
<div class="line">EEPROM Size = 32 KBytes</div>
<div class="line">TEST PASSED.</div>
<div class="line">Returned error code = 1</div>
<div class="line">Returned Status Bytes = 0x90, 0x 0</div>
<div class="line">Deactivating card...Done!</div>
<div class="line">Card inserted.</div>
<div class="line">Deactivating card...Done!</div>
<div class="line">Resetting/Activating card...Done!</div>
<div class="line"></div>
<div class="line">==========================================</div>
<div class="line">Protocol T=1 test started!</div>
<div class="line">Echo data matched!</div>
<div class="line">TEST PASSED.</div>
<div class="line">Returned error code = 1</div>
<div class="line">Returned Status Bytes = 0x90, 0x 0</div>
<div class="line">Deactivating card...Done!</div>
<div class="line"></div>
<div class="line">      SMARTCARD Driver Protocol Test in DMA mode *****</div>
<div class="line"></div>
<div class="line">Card inserted.</div>
<div class="line">Deactivating card...Done!</div>
<div class="line">Resetting/Activating card...Done!</div>
<div class="line"></div>
<div class="line">==========================================</div>
<div class="line">Protocol T=0 test started!</div>
<div class="line"></div>
<div class="line">EEPROM Start Address = 0xC00000</div>
<div class="line">EEPROM Size = 32 KBytes</div>
<div class="line">TEST PASSED.</div>
<div class="line">Returned error code = 1</div>
<div class="line">Returned Status Bytes = 0x90, 0x 0</div>
<div class="line">Deactivating card...Done!</div>
<div class="line">Card inserted.</div>
<div class="line">Deactivating card...Done!</div>
<div class="line">Resetting/Activating card...Done!</div>
<div class="line"></div>
<div class="line">==========================================</div>
<div class="line">Protocol T=1 test started!</div>
<div class="line">Echo data matched!</div>
<div class="line">TEST PASSED.</div>
<div class="line">Returned error code = 1</div>
<div class="line">Returned Status Bytes = 0x90, 0x 0</div>
<div class="line">Deactivating card...Done!</div>
<div class="line">      SMARTCARD Driver Protocol Test End *****</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Thu Sep 24 2015 &copy; 2015 Freescale Semiconductor, Inc. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
